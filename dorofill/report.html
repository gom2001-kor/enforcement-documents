<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="DoroFill - ìš´í–‰ì œí•œ ìœ„ë°˜ ì ë°œ ë³´ê³ ì„œ ì‘ì„±">
    <title>ì ë°œ ë³´ê³ ì„œ - DoroFill</title>

    <!-- TailwindCSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- pdf-lib CDN -->
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>

    <!-- Google Fonts - Noto Sans KR -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/styles.css">

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Noto Sans KR', 'system-ui', '-apple-system', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#2563eb',
                            600: '#1d4ed8',
                            700: '#1e40af',
                            800: '#1e3a8a',
                            900: '#1e3a8a',
                        },
                        success: '#10b981',
                        warning: '#ef4444',
                    }
                }
            }
        }
    </script>
</head>

<body class="min-h-screen bg-gray-50 font-sans">
    <!-- Fixed Header -->
    <header class="header-fixed bg-white shadow-sm">
        <div class="container flex items-center justify-between h-full">
            <!-- Back Button -->
            <a href="index.html"
                class="flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors min-w-[44px] min-h-[44px] justify-center">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                </svg>
                <span class="text-sm hidden sm:inline">ëŒì•„ê°€ê¸°</span>
            </a>

            <!-- Title -->
            <h1 class="text-lg font-bold text-gray-900">ì ë°œ ë³´ê³ ì„œ ì‘ì„±</h1>

            <!-- Save Button -->
            <button type="button" id="btn-save"
                class="flex items-center gap-1 px-3 py-2 text-sm font-medium text-primary-500 hover:bg-primary-50 rounded-lg transition-colors min-w-[44px] min-h-[44px] justify-center">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4">
                    </path>
                </svg>
                <span class="hidden sm:inline">ì €ì¥</span>
            </button>
        </div>
    </header>

    <!-- Main Content - Scrollable Area -->
    <main class="main-content">
        <div class="container">
            <form id="reportForm" novalidate>

                <!-- Section 1: ê¸°ë³¸ ì •ë³´ -->
                <section class="bg-white rounded-lg shadow-md p-4 mb-4 animate-fade-in">
                    <!-- Section Header -->
                    <h2
                        class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-100">
                        <span class="text-xl">ğŸ“</span>
                        ê¸°ë³¸ ì •ë³´
                    </h2>

                    <!-- ì ë°œ ì¼ì‹œ -->
                    <div class="form-group">
                        <label for="reportDatetime" class="form-label form-label-required">
                            ì ë°œ ì¼ì‹œ
                        </label>
                        <input type="datetime-local" id="reportDatetime" name="reportDatetime" class="form-input w-full"
                            required>
                        <p class="text-xs text-gray-500 mt-1">ìœ„ë°˜ ì°¨ëŸ‰ì„ ì ë°œí•œ ë‚ ì§œì™€ ì‹œê°„</p>
                    </div>

                    <!-- ì ë°œ ìœ„ì¹˜ -->
                    <div class="form-group mb-0">
                        <label for="reportLocation" class="form-label form-label-required">
                            ì ë°œ ìœ„ì¹˜
                        </label>
                        <textarea id="reportLocation" name="reportLocation" class="form-input form-textarea w-full"
                            rows="2" placeholder="êµ­ë„ 17í˜¸ì„  ì¶©ë¶ ì²­ì£¼ì‹œ ì„œì›êµ¬ í˜„ë„ë©´ ì£½ì•”ë¦¬" required></textarea>
                        <p class="text-xs text-gray-500 mt-1">ë„ë¡œëª… ë˜ëŠ” ìƒì„¸ ì£¼ì†Œ ì…ë ¥</p>
                    </div>
                </section>

                <!-- ì¶”ê°€ ì„¹ì…˜ë“¤ì€ ì—¬ê¸°ì— êµ¬í˜„ ì˜ˆì • -->
                <section class="bg-white rounded-lg shadow-md p-4 mb-4">
                    <h2
                        class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-100">
                        <span class="text-xl">ğŸš›</span>
                        ì°¨ëŸ‰ ì •ë³´
                    </h2>
                    <p class="text-center text-gray-400 py-4 text-sm">
                        (ì¶”í›„ êµ¬í˜„ ì˜ˆì •)
                    </p>
                </section>

                <section class="bg-white rounded-lg shadow-md p-4 mb-4">
                    <h2
                        class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-4 pb-3 border-b border-gray-100">
                        <span class="text-xl">âš–ï¸</span>
                        ìœ„ë°˜ ë‚´ìš©
                    </h2>
                    <p class="text-center text-gray-400 py-4 text-sm">
                        (ì¶”í›„ êµ¬í˜„ ì˜ˆì •)
                    </p>
                </section>

            </form>
        </div>
    </main>

    <!-- Fixed Footer - PDF Generate Button -->
    <footer class="footer-fixed bg-white">
        <div class="container">
            <button type="button" id="btn-generate-pdf" class="btn btn-primary btn-block">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z">
                    </path>
                </svg>
                PDF ìƒì„±í•˜ê¸°
            </button>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/app.js"></script>
    <script src="js/validator.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/pdf-handler.js"></script>

    <!-- Page Specific Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Set default datetime to current
            const datetimeInput = document.getElementById('reportDatetime');
            if (datetimeInput) {
                const now = new Date();
                // Format: YYYY-MM-DDTHH:MM
                const year = now.getFullYear();
                const month = String(now.getMonth() + 1).padStart(2, '0');
                const day = String(now.getDate()).padStart(2, '0');
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                datetimeInput.value = `${year}-${month}-${day}T${hours}:${minutes}`;
            }

            // Save button handler
            const saveBtn = document.getElementById('btn-save');
            if (saveBtn) {
                saveBtn.addEventListener('click', () => {
                    const formData = {
                        reportDatetime: document.getElementById('reportDatetime')?.value,
                        reportLocation: document.getElementById('reportLocation')?.value,
                    };
                    saveToStorage('report_draft', formData);
                    showToast('ì„ì‹œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                });
            }

            // Load saved draft on page load
            const savedDraft = loadFromStorage('report_draft');
            if (savedDraft) {
                if (savedDraft.reportDatetime) {
                    document.getElementById('reportDatetime').value = savedDraft.reportDatetime;
                }
                if (savedDraft.reportLocation) {
                    document.getElementById('reportLocation').value = savedDraft.reportLocation;
                }
            }

            // PDF generate button handler
            const pdfBtn = document.getElementById('btn-generate-pdf');
            if (pdfBtn) {
                pdfBtn.addEventListener('click', async () => {
                    // Validate form
                    const datetime = document.getElementById('reportDatetime')?.value;
                    const location = document.getElementById('reportLocation')?.value;

                    if (!datetime || !location) {
                        showToast('í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”', 'warning');
                        return;
                    }

                    showToast('PDF ìƒì„± ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤', 'info');
                });
            }
        });
    </script>
</body>

</html>